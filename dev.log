
> ai-project@0.1.0 dev
> next dev

⚠ Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/ninadhirani/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/ninadhirani/Desktop/ai-project/package-lock.json

▲ Next.js 16.1.6 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://10.229.48.253:3000
- Environments: .env.local

✓ Starting...
✓ Ready in 1044ms
[Chat] Response time: 4835ms
 POST /api/chat 200 in 5.3s (compile: 388ms, render: 4.9s)
[Chat] Response time: 3487ms
 POST /api/chat 200 in 3.5s (compile: 9ms, render: 3.5s)
[Chat] Response time: 3580ms
 POST /api/chat 200 in 3.6s (compile: 3ms, render: 3.6s)
[Chat] Response time: 3786ms
 POST /api/chat 200 in 3.8s (compile: 3ms, render: 3.8s)
[Chat] Response time: 2663ms
 POST /api/chat 200 in 2.7s (compile: 3ms, render: 2.7s)
 POST /api/chat/history 405 in 98ms (compile: 88ms, render: 10ms)
 GET /api/chat/sessions?userId=test-user 200 in 798ms (compile: 85ms, render: 713ms)
[Chat] Response time: 3277ms
 POST /api/chat 200 in 3.3s (compile: 7ms, render: 3.3s)
[Chat] Response time: 2835ms
 POST /api/chat 200 in 2.8s (compile: 1491µs, render: 2.8s)
[Chat] Response time: 2280ms
 POST /api/chat 200 in 2.3s (compile: 3ms, render: 2.3s)
[Chat] Response time: 2568ms
 POST /api/chat 200 in 2.6s (compile: 1453µs, render: 2.6s)
[Chat] Response time: 5477ms
 POST /api/chat 200 in 5.6s (compile: 103ms, render: 5.5s)
[Chat] Response time: 4189ms
 POST /api/chat 200 in 4.2s (compile: 3ms, render: 4.2s)
 GET /api/chat/history?sessionId=f9ad8493-3f4d-4f87-adc1-88c113f54040 200 in 431ms (compile: 3ms, render: 428ms)
 GET /api/chat/sessions?userId=anonymous 200 in 458ms (compile: 6ms, render: 452ms)
 GET /api/chat/history?sessionId=2c396b9d-2733-4ab0-a0d6-c7cdeb929865 200 in 485ms (compile: 17ms, render: 468ms)
 GET /api/chat/history?sessionId=f9ad8493-3f4d-4f87-adc1-88c113f54040 200 in 989ms (compile: 11ms, render: 978ms)
 GET /api/chat/history?sessionId=f9ad8493-3f4d-4f87-adc1-88c113f54040 200 in 465ms (compile: 29ms, render: 436ms)
 GET /api/chat/history?sessionId=f9ad8493-3f4d-4f87-adc1-88c113f54040 200 in 402ms (compile: 10ms, render: 392ms)
 GET / 200 in 3.4s (compile: 3.0s, render: 423ms)
 GET /api/chat/sessions?userId=anonymous&limit=100 200 in 801ms (compile: 9ms, render: 791ms)
[Chat] Response time: 3846ms
 POST /api/chat 200 in 3.9s (compile: 30ms, render: 3.9s)
[Chat] Response time: 3659ms
 POST /api/chat 200 in 3.7s (compile: 5ms, render: 3.7s)
[Chat] Response time: 3113ms
 POST /api/chat 200 in 3.1s (compile: 3ms, render: 3.1s)
[Chat] Response time: 3300ms
 POST /api/chat 200 in 3.3s (compile: 4ms, render: 3.3s)
[Upload] Processing: sem4de-report.pdf size: 3279245
Warning: Setting up fake worker.
Warning: TT: undefined function: 32
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
URIError: URI malformed
    at decodeURIComponent (<anonymous>)
    at <unknown> (app/api/documents/upload/route.ts:23:58)
    at Array.map (<anonymous>)
    at vi.<anonymous> (app/api/documents/upload/route.ts:23:42)
  21 |               for (const textItem of page.Texts) {
  22 |                 if (textItem.R) {
> 23 |                   fullText += textItem.R.map((r: any) => decodeURIComponent(r.T)).join(" ") + " ";
     |                                                          ^
  24 |                 }
  25 |               }
  26 |               fullText += "\n";
⨯ uncaughtException: URIError: URI malformed
    at decodeURIComponent (<anonymous>)
    at <unknown> (app/api/documents/upload/route.ts:23:58)
    at Array.map (<anonymous>)
    at vi.<anonymous> (app/api/documents/upload/route.ts:23:42)
  21 |               for (const textItem of page.Texts) {
  22 |                 if (textItem.R) {
> 23 |                   fullText += textItem.R.map((r: any) => decodeURIComponent(r.T)).join(" ") + " ";
     |                                                          ^
  24 |                 }
  25 |               }
  26 |               fullText += "\n";
⨯ uncaughtException:  URIError: URI malformed
    at decodeURIComponent (<anonymous>)
    at <unknown> (app/api/documents/upload/route.ts:23:58)
    at Array.map (<anonymous>)
    at vi.<anonymous> (app/api/documents/upload/route.ts:23:42)
  21 |               for (const textItem of page.Texts) {
  22 |                 if (textItem.R) {
> 23 |                   fullText += textItem.R.map((r: any) => decodeURIComponent(r.T)).join(" ") + " ";
     |                                                          ^
  24 |                 }
  25 |               }
  26 |               fullText += "\n";
✓ Compiled in 411ms
 GET /api/chat/sessions?userId=anonymous&limit=3 200 in 980ms (compile: 29ms, render: 952ms)
 GET / 200 in 235ms (compile: 88ms, render: 146ms)
 GET /api/chat/sessions?userId=anonymous&limit=20 200 in 1063ms (compile: 14ms, render: 1049ms)
✓ Compiled in 178ms
✓ Compiled in 107ms
 GET /api/chat/sessions?userId=anonymous&limit=5 200 in 1327ms (compile: 6ms, render: 1321ms)
✓ Compiled in 132ms
 GET / 200 in 207ms (compile: 70ms, render: 137ms)
 POST /api/documents/upload 200 in 14.6min (compile: 701ms, render: 14.6min)
 GET /api/chat/sessions?userId=anonymous&limit=100 200 in 1338ms (compile: 9ms, render: 1329ms)
[Upload] Processing: sem4de-report.pdf size: 3279245
Warning: Setting up fake worker.
Warning: TT: undefined function: 32
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
[Upload] Extracted: 33110 chars
 POST /api/documents/upload 500 in 1169ms (compile: 146ms, render: 1023ms)
 GET / 200 in 87ms (compile: 15ms, render: 71ms)
 GET /api/chat/sessions?userId=anonymous&limit=100 200 in 753ms (compile: 8ms, render: 746ms)
[Upload] Processing: sem4de-report.pdf size: 3279245
Warning: Setting up fake worker.
Warning: TT: undefined function: 32
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
Warning: Unsupported: field.type of Link
Warning: NOT valid form element
[Upload] Extracted: 33110 chars
 POST /api/documents/upload 500 in 1060ms (compile: 21ms, render: 1039ms)
